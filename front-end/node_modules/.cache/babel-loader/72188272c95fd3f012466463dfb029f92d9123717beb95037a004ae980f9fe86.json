{"ast":null,"code":"import { Subscription as SubscriptionCapabilities } from '@web3-storage/capabilities';\nimport * as API from '../types.js';\nimport { Base } from '../base.js';\n/**\n * Client for interacting with the `subscription/*` capabilities.\n */\nexport class SubscriptionClient extends Base {\n  /**\n   * List subscriptions for the passed account.\n   *\n   * Required delegated capabilities:\n   * - `subscription/list`\n   *\n   * @param {import('@web3-storage/access').AccountDID} account\n   * @param {object} [options]\n   * @param {string} [options.nonce]\n   */\n  /* c8 ignore next */\n  async list(account, options) {\n    const out = await list({\n      agent: this.agent\n    }, {\n      ...options,\n      account\n    });\n    /* c8 ignore next 8 */\n    if (!out.ok) {\n      throw new Error(`failed ${SubscriptionCapabilities.list.can} invocation`, {\n        cause: out.error\n      });\n    }\n    return out.ok;\n  }\n}\n/**\n * Gets subscriptions associated with the account.\n *\n * @param {{agent: API.Agent}} client\n * @param {object} options\n * @param {API.AccountDID} options.account\n * @param {string} [options.nonce]\n * @param {API.Delegation[]} [options.proofs]\n */\nexport const list = async ({\n  agent\n}, {\n  account,\n  nonce,\n  proofs = []\n}) => {\n  const receipt = await agent.invokeAndExecute(SubscriptionCapabilities.list, {\n    with: account,\n    proofs,\n    nb: {},\n    nonce\n  });\n  return receipt.out;\n};","map":{"version":3,"names":["Subscription","SubscriptionCapabilities","API","Base","SubscriptionClient","list","account","options","out","agent","ok","Error","can","cause","error","nonce","proofs","receipt","invokeAndExecute","with","nb"],"sources":["../../../src/capability/subscription.js"],"sourcesContent":[null],"mappings":"AAAA,SAASA,YAAY,IAAIC,wBAAwB,QAAQ,4BAA4B;AACrF,OAAO,KAAKC,GAAG,MAAM,aAAa;AAClC,SAASC,IAAI,QAAQ,YAAY;AAEjC;;;AAGA,OAAM,MAAOC,kBAAmB,SAAQD,IAAI;EAC1C;;;;;;;;;;EAUA;EACA,MAAME,IAAIA,CAACC,OAAO,EAAEC,OAAO;IACzB,MAAMC,GAAG,GAAG,MAAMH,IAAI,CAAC;MAAEI,KAAK,EAAE,IAAI,CAACA;IAAK,CAAE,EAAE;MAAE,GAAGF,OAAO;MAAED;IAAO,CAAE,CAAC;IACtE;IACA,IAAI,CAACE,GAAG,CAACE,EAAE,EAAE;MACX,MAAM,IAAIC,KAAK,CACb,UAAUV,wBAAwB,CAACI,IAAI,CAACO,GAAG,aAAa,EACxD;QACEC,KAAK,EAAEL,GAAG,CAACM;OACZ,CACF;;IAGH,OAAON,GAAG,CAACE,EAAE;EACf;;AAGF;;;;;;;;;AASA,OAAO,MAAML,IAAI,GAAG,MAAAA,CAAO;EAAEI;AAAK,CAAE,EAAE;EAAEH,OAAO;EAAES,KAAK;EAAEC,MAAM,GAAG;AAAE,CAAE,KAAI;EACvE,MAAMC,OAAO,GAAG,MAAMR,KAAK,CAACS,gBAAgB,CAACjB,wBAAwB,CAACI,IAAI,EAAE;IAC1Ec,IAAI,EAAEb,OAAO;IACbU,MAAM;IACNI,EAAE,EAAE,EAAE;IACNL;GACD,CAAC;EACF,OAAOE,OAAO,CAACT,GAAG;AACpB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}