{"ast":null,"code":"/**\n * Rate Limit Capabilities\n *\n * These can be imported directly with:\n * ```js\n * import * as RateLimit from '@web3-storage/capabilities/rate-limit'\n * ```\n *\n * @module\n */\nimport { capability, DID, struct, Schema, ok } from '@ucanto/validator';\nimport { equalWith, and, equal } from './utils.js';\n\n// e.g. did:web:web3.storage or did:web:staging.web3.storage\nexport const Provider = DID;\n\n/**\n * Capability can be invoked by the provider or an authorized delegate to add a rate limit to a subject.\n */\nexport const add = capability({\n  can: 'rate-limit/add',\n  with: Provider,\n  nb: struct({\n    subject: Schema.string(),\n    rate: Schema.number()\n  }),\n  derives: (child, parent) => {\n    return and(equalWith(child, parent)) || and(equal(child.nb.subject, parent.nb.subject, 'subject')) || and(equal(child.nb.rate, parent.nb.rate, 'rate')) || ok({});\n  }\n});\n\n/**\n * Capability can be invoked by the provider are an authorized delegate to remove rate limits from a subject.\n */\nexport const remove = capability({\n  can: 'rate-limit/remove',\n  with: Provider,\n  nb: struct({\n    id: Schema.string()\n  }),\n  derives: (child, parent) => {\n    return and(equalWith(child, parent)) || and(equal(child.nb.id, parent.nb.id, 'id')) || ok({});\n  }\n});\n\n/**\n * Capability can be invoked by the provider or an authorized delegate to list rate limits on the given subject\n */\nexport const list = capability({\n  can: 'rate-limit/list',\n  with: Provider,\n  nb: struct({\n    subject: Schema.string()\n  }),\n  derives: (child, parent) => {\n    return and(equalWith(child, parent)) || and(equal(child.nb.subject, parent.nb.subject, 'subject')) || ok({});\n  }\n});","map":{"version":3,"names":["capability","DID","struct","Schema","ok","equalWith","and","equal","Provider","add","can","with","nb","subject","string","rate","number","derives","child","parent","remove","id","list"],"sources":["C:/FACULTATE/Proiect/node_modules/@web3-storage/capabilities/src/rate-limit.js"],"sourcesContent":["/**\n * Rate Limit Capabilities\n *\n * These can be imported directly with:\n * ```js\n * import * as RateLimit from '@web3-storage/capabilities/rate-limit'\n * ```\n *\n * @module\n */\nimport { capability, DID, struct, Schema, ok } from '@ucanto/validator'\nimport { equalWith, and, equal } from './utils.js'\n\n// e.g. did:web:web3.storage or did:web:staging.web3.storage\nexport const Provider = DID\n\n/**\n * Capability can be invoked by the provider or an authorized delegate to add a rate limit to a subject.\n */\nexport const add = capability({\n  can: 'rate-limit/add',\n  with: Provider,\n  nb: struct({\n    subject: Schema.string(),\n    rate: Schema.number(),\n  }),\n  derives: (child, parent) => {\n    return (\n      and(equalWith(child, parent)) ||\n      and(equal(child.nb.subject, parent.nb.subject, 'subject')) ||\n      and(equal(child.nb.rate, parent.nb.rate, 'rate')) ||\n      ok({})\n    )\n  },\n})\n\n/**\n * Capability can be invoked by the provider are an authorized delegate to remove rate limits from a subject.\n */\nexport const remove = capability({\n  can: 'rate-limit/remove',\n  with: Provider,\n  nb: struct({\n    id: Schema.string(),\n  }),\n  derives: (child, parent) => {\n    return (\n      and(equalWith(child, parent)) ||\n      and(equal(child.nb.id, parent.nb.id, 'id')) ||\n      ok({})\n    )\n  },\n})\n\n/**\n * Capability can be invoked by the provider or an authorized delegate to list rate limits on the given subject\n */\nexport const list = capability({\n  can: 'rate-limit/list',\n  with: Provider,\n  nb: struct({\n    subject: Schema.string(),\n  }),\n  derives: (child, parent) => {\n    return (\n      and(equalWith(child, parent)) ||\n      and(equal(child.nb.subject, parent.nb.subject, 'subject')) ||\n      ok({})\n    )\n  },\n})\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASA,UAAU,EAAEC,GAAG,EAAEC,MAAM,EAAEC,MAAM,EAAEC,EAAE,QAAQ,mBAAmB;AACvE,SAASC,SAAS,EAAEC,GAAG,EAAEC,KAAK,QAAQ,YAAY;;AAElD;AACA,OAAO,MAAMC,QAAQ,GAAGP,GAAG;;AAE3B;AACA;AACA;AACA,OAAO,MAAMQ,GAAG,GAAGT,UAAU,CAAC;EAC5BU,GAAG,EAAE,gBAAgB;EACrBC,IAAI,EAAEH,QAAQ;EACdI,EAAE,EAAEV,MAAM,CAAC;IACTW,OAAO,EAAEV,MAAM,CAACW,MAAM,CAAC,CAAC;IACxBC,IAAI,EAAEZ,MAAM,CAACa,MAAM,CAAC;EACtB,CAAC,CAAC;EACFC,OAAO,EAAEA,CAACC,KAAK,EAAEC,MAAM,KAAK;IAC1B,OACEb,GAAG,CAACD,SAAS,CAACa,KAAK,EAAEC,MAAM,CAAC,CAAC,IAC7Bb,GAAG,CAACC,KAAK,CAACW,KAAK,CAACN,EAAE,CAACC,OAAO,EAAEM,MAAM,CAACP,EAAE,CAACC,OAAO,EAAE,SAAS,CAAC,CAAC,IAC1DP,GAAG,CAACC,KAAK,CAACW,KAAK,CAACN,EAAE,CAACG,IAAI,EAAEI,MAAM,CAACP,EAAE,CAACG,IAAI,EAAE,MAAM,CAAC,CAAC,IACjDX,EAAE,CAAC,CAAC,CAAC,CAAC;EAEV;AACF,CAAC,CAAC;;AAEF;AACA;AACA;AACA,OAAO,MAAMgB,MAAM,GAAGpB,UAAU,CAAC;EAC/BU,GAAG,EAAE,mBAAmB;EACxBC,IAAI,EAAEH,QAAQ;EACdI,EAAE,EAAEV,MAAM,CAAC;IACTmB,EAAE,EAAElB,MAAM,CAACW,MAAM,CAAC;EACpB,CAAC,CAAC;EACFG,OAAO,EAAEA,CAACC,KAAK,EAAEC,MAAM,KAAK;IAC1B,OACEb,GAAG,CAACD,SAAS,CAACa,KAAK,EAAEC,MAAM,CAAC,CAAC,IAC7Bb,GAAG,CAACC,KAAK,CAACW,KAAK,CAACN,EAAE,CAACS,EAAE,EAAEF,MAAM,CAACP,EAAE,CAACS,EAAE,EAAE,IAAI,CAAC,CAAC,IAC3CjB,EAAE,CAAC,CAAC,CAAC,CAAC;EAEV;AACF,CAAC,CAAC;;AAEF;AACA;AACA;AACA,OAAO,MAAMkB,IAAI,GAAGtB,UAAU,CAAC;EAC7BU,GAAG,EAAE,iBAAiB;EACtBC,IAAI,EAAEH,QAAQ;EACdI,EAAE,EAAEV,MAAM,CAAC;IACTW,OAAO,EAAEV,MAAM,CAACW,MAAM,CAAC;EACzB,CAAC,CAAC;EACFG,OAAO,EAAEA,CAACC,KAAK,EAAEC,MAAM,KAAK;IAC1B,OACEb,GAAG,CAACD,SAAS,CAACa,KAAK,EAAEC,MAAM,CAAC,CAAC,IAC7Bb,GAAG,CAACC,KAAK,CAACW,KAAK,CAACN,EAAE,CAACC,OAAO,EAAEM,MAAM,CAACP,EAAE,CAACC,OAAO,EAAE,SAAS,CAAC,CAAC,IAC1DT,EAAE,CAAC,CAAC,CAAC,CAAC;EAEV;AACF,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}