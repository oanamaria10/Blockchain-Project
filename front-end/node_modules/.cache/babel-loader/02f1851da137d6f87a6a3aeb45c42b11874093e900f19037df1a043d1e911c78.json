{"ast":null,"code":"import { isString } from './is';\nimport { normalize } from './object';\n/**\n * Checks whether we're in the Node.js or Browser environment\n *\n * @returns Answer to given question\n */\nexport function isNodeEnv() {\n  return Object.prototype.toString.call(typeof process !== 'undefined' ? process : 0) === '[object process]';\n}\n/**\n * Requires a module which is protected against bundler minification.\n *\n * @param request The module path to resolve\n */\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport function dynamicRequire(mod, request) {\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  return mod.require(request);\n}\n/** Default request keys that'll be used to extract data from the request */\nvar DEFAULT_REQUEST_KEYS = ['cookies', 'data', 'headers', 'method', 'query_string', 'url'];\n/**\n * Normalizes data from the request object, accounting for framework differences.\n *\n * @param req The request object from which to extract data\n * @param keys An optional array of keys to include in the normalized data. Defaults to DEFAULT_REQUEST_KEYS if not\n * provided.\n * @returns An object containing normalized request data\n */\nexport function extractNodeRequestData(req, keys) {\n  if (keys === void 0) {\n    keys = DEFAULT_REQUEST_KEYS;\n  }\n  // make sure we can safely use dynamicRequire below\n  if (!isNodeEnv()) {\n    throw new Error(\"Can't get node request data outside of a node environment\");\n  }\n  var requestData = {};\n  // headers:\n  //   node, express: req.headers\n  //   koa: req.header\n  var headers = req.headers || req.header || {};\n  // method:\n  //   node, express, koa: req.method\n  var method = req.method;\n  // host:\n  //   express: req.hostname in > 4 and req.host in < 4\n  //   koa: req.host\n  //   node: req.headers.host\n  var host = req.hostname || req.host || headers.host || '<no host>';\n  // protocol:\n  //   node: <n/a>\n  //   express, koa: req.protocol\n  var protocol = req.protocol === 'https' || req.secure || (req.socket || {}).encrypted ? 'https' : 'http';\n  // url (including path and query string):\n  //   node, express: req.originalUrl\n  //   koa: req.url\n  var originalUrl = req.originalUrl || req.url || '';\n  // absolute url\n  var absoluteUrl = protocol + \"://\" + host + originalUrl;\n  keys.forEach(function (key) {\n    switch (key) {\n      case 'headers':\n        requestData.headers = headers;\n        break;\n      case 'method':\n        requestData.method = method;\n        break;\n      case 'url':\n        requestData.url = absoluteUrl;\n        break;\n      case 'cookies':\n        // cookies:\n        //   node, express, koa: req.headers.cookie\n        //   vercel, sails.js, express (w/ cookie middleware): req.cookies\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n        requestData.cookies = req.cookies || dynamicRequire(module, 'cookie').parse(headers.cookie || '');\n        break;\n      case 'query_string':\n        // query string:\n        //   node: req.url (raw)\n        //   express, koa: req.query\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n        requestData.query_string = dynamicRequire(module, 'url').parse(originalUrl || '', false).query;\n        break;\n      case 'data':\n        if (method === 'GET' || method === 'HEAD') {\n          break;\n        }\n        // body data:\n        //   node, express, koa: req.body\n        if (req.body !== undefined) {\n          requestData.data = isString(req.body) ? req.body : JSON.stringify(normalize(req.body));\n        }\n        break;\n      default:\n        if ({}.hasOwnProperty.call(req, key)) {\n          requestData[key] = req[key];\n        }\n    }\n  });\n  return requestData;\n}","map":{"version":3,"names":["isString","normalize","isNodeEnv","Object","prototype","toString","call","process","dynamicRequire","mod","request","require","DEFAULT_REQUEST_KEYS","extractNodeRequestData","req","keys","Error","requestData","headers","header","method","host","hostname","protocol","secure","socket","encrypted","originalUrl","url","absoluteUrl","forEach","key","cookies","module","parse","cookie","query_string","query","body","undefined","data","JSON","stringify","hasOwnProperty"],"sources":["C:\\Users\\rares\\Desktop\\Blockchain\\Proiect\\node_modules\\@sentry\\utils\\src\\node.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { ExtractedNodeRequestData } from '@sentry/types';\n\nimport { isString } from './is';\nimport { normalize } from './object';\n\n/**\n * Checks whether we're in the Node.js or Browser environment\n *\n * @returns Answer to given question\n */\nexport function isNodeEnv(): boolean {\n  return Object.prototype.toString.call(typeof process !== 'undefined' ? process : 0) === '[object process]';\n}\n\n/**\n * Requires a module which is protected against bundler minification.\n *\n * @param request The module path to resolve\n */\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport function dynamicRequire(mod: any, request: string): any {\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  return mod.require(request);\n}\n\n/** Default request keys that'll be used to extract data from the request */\nconst DEFAULT_REQUEST_KEYS = ['cookies', 'data', 'headers', 'method', 'query_string', 'url'];\n\n/**\n * Normalizes data from the request object, accounting for framework differences.\n *\n * @param req The request object from which to extract data\n * @param keys An optional array of keys to include in the normalized data. Defaults to DEFAULT_REQUEST_KEYS if not\n * provided.\n * @returns An object containing normalized request data\n */\nexport function extractNodeRequestData(\n  req: { [key: string]: any },\n  keys: string[] = DEFAULT_REQUEST_KEYS,\n): ExtractedNodeRequestData {\n  // make sure we can safely use dynamicRequire below\n  if (!isNodeEnv()) {\n    throw new Error(\"Can't get node request data outside of a node environment\");\n  }\n\n  const requestData: { [key: string]: any } = {};\n\n  // headers:\n  //   node, express: req.headers\n  //   koa: req.header\n  const headers = (req.headers || req.header || {}) as {\n    host?: string;\n    cookie?: string;\n  };\n  // method:\n  //   node, express, koa: req.method\n  const method = req.method;\n  // host:\n  //   express: req.hostname in > 4 and req.host in < 4\n  //   koa: req.host\n  //   node: req.headers.host\n  const host = req.hostname || req.host || headers.host || '<no host>';\n  // protocol:\n  //   node: <n/a>\n  //   express, koa: req.protocol\n  const protocol =\n    req.protocol === 'https' || req.secure || ((req.socket || {}) as { encrypted?: boolean }).encrypted\n      ? 'https'\n      : 'http';\n  // url (including path and query string):\n  //   node, express: req.originalUrl\n  //   koa: req.url\n  const originalUrl = (req.originalUrl || req.url || '') as string;\n  // absolute url\n  const absoluteUrl = `${protocol}://${host}${originalUrl}`;\n\n  keys.forEach(key => {\n    switch (key) {\n      case 'headers':\n        requestData.headers = headers;\n        break;\n      case 'method':\n        requestData.method = method;\n        break;\n      case 'url':\n        requestData.url = absoluteUrl;\n        break;\n      case 'cookies':\n        // cookies:\n        //   node, express, koa: req.headers.cookie\n        //   vercel, sails.js, express (w/ cookie middleware): req.cookies\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n        requestData.cookies = req.cookies || dynamicRequire(module, 'cookie').parse(headers.cookie || '');\n        break;\n      case 'query_string':\n        // query string:\n        //   node: req.url (raw)\n        //   express, koa: req.query\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n        requestData.query_string = dynamicRequire(module, 'url').parse(originalUrl || '', false).query;\n        break;\n      case 'data':\n        if (method === 'GET' || method === 'HEAD') {\n          break;\n        }\n        // body data:\n        //   node, express, koa: req.body\n        if (req.body !== undefined) {\n          requestData.data = isString(req.body) ? req.body : JSON.stringify(normalize(req.body));\n        }\n        break;\n      default:\n        if ({}.hasOwnProperty.call(req, key)) {\n          requestData[key] = (req as { [key: string]: any })[key];\n        }\n    }\n  });\n\n  return requestData;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}