{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getClosestCallerPackage = void 0;\nconst find_up_1 = __importDefault(require(\"find-up\"));\nconst path_1 = __importDefault(require(\"path\"));\nfunction findClosestPackageJson(file) {\n  return find_up_1.default.sync(\"package.json\", {\n    cwd: path_1.default.dirname(file)\n  });\n}\n/**\n * Returns the name of the closest package in the callstack that isn't this.\n */\nfunction getClosestCallerPackage() {\n  const previousPrepareStackTrace = Error.prepareStackTrace;\n  Error.prepareStackTrace = (e, s) => s;\n  const error = new Error();\n  const stack = error.stack;\n  Error.prepareStackTrace = previousPrepareStackTrace;\n  const currentPackage = findClosestPackageJson(__filename);\n  for (const callSite of stack) {\n    const fileName = callSite.getFileName();\n    // fileName is string | null in @types/node <=18\n    // and string | undefined in @types/node 20\n    if (fileName !== null && fileName !== undefined && path_1.default.isAbsolute(fileName)) {\n      const callerPackage = findClosestPackageJson(fileName);\n      if (callerPackage === currentPackage) {\n        continue;\n      }\n      if (callerPackage === null) {\n        return undefined;\n      }\n      return require(callerPackage).name;\n    }\n  }\n  return undefined;\n}\nexports.getClosestCallerPackage = getClosestCallerPackage;","map":{"version":3,"names":["find_up_1","__importDefault","require","path_1","findClosestPackageJson","file","default","sync","cwd","dirname","getClosestCallerPackage","previousPrepareStackTrace","Error","prepareStackTrace","e","s","error","stack","currentPackage","__filename","callSite","fileName","getFileName","undefined","isAbsolute","callerPackage","name","exports"],"sources":["C:\\Users\\rares\\Desktop\\Blockchain\\Proiect\\node_modules\\hardhat\\src\\internal\\util\\caller-package.ts"],"sourcesContent":["import findup from \"find-up\";\nimport path from \"path\";\n\nfunction findClosestPackageJson(file: string): string | null {\n  return findup.sync(\"package.json\", { cwd: path.dirname(file) });\n}\n\n/**\n * Returns the name of the closest package in the callstack that isn't this.\n */\nexport function getClosestCallerPackage(): string | undefined {\n  const previousPrepareStackTrace = Error.prepareStackTrace;\n\n  Error.prepareStackTrace = (e, s) => s;\n\n  const error = new Error();\n  const stack: NodeJS.CallSite[] = error.stack as any;\n\n  Error.prepareStackTrace = previousPrepareStackTrace;\n\n  const currentPackage = findClosestPackageJson(__filename)!;\n\n  for (const callSite of stack) {\n    const fileName = callSite.getFileName();\n    // fileName is string | null in @types/node <=18\n    // and string | undefined in @types/node 20\n    if (\n      fileName !== null &&\n      fileName !== undefined &&\n      path.isAbsolute(fileName)\n    ) {\n      const callerPackage = findClosestPackageJson(fileName);\n\n      if (callerPackage === currentPackage) {\n        continue;\n      }\n\n      if (callerPackage === null) {\n        return undefined;\n      }\n\n      return require(callerPackage).name;\n    }\n  }\n\n  return undefined;\n}\n"],"mappings":";;;;;;;;;;;AAAA,MAAAA,SAAA,GAAAC,eAAA,CAAAC,OAAA;AACA,MAAAC,MAAA,GAAAF,eAAA,CAAAC,OAAA;AAEA,SAASE,sBAAsBA,CAACC,IAAY;EAC1C,OAAOL,SAAA,CAAAM,OAAM,CAACC,IAAI,CAAC,cAAc,EAAE;IAAEC,GAAG,EAAEL,MAAA,CAAAG,OAAI,CAACG,OAAO,CAACJ,IAAI;EAAC,CAAE,CAAC;AACjE;AAEA;;;AAGA,SAAgBK,uBAAuBA,CAAA;EACrC,MAAMC,yBAAyB,GAAGC,KAAK,CAACC,iBAAiB;EAEzDD,KAAK,CAACC,iBAAiB,GAAG,CAACC,CAAC,EAAEC,CAAC,KAAKA,CAAC;EAErC,MAAMC,KAAK,GAAG,IAAIJ,KAAK,EAAE;EACzB,MAAMK,KAAK,GAAsBD,KAAK,CAACC,KAAY;EAEnDL,KAAK,CAACC,iBAAiB,GAAGF,yBAAyB;EAEnD,MAAMO,cAAc,GAAGd,sBAAsB,CAACe,UAAU,CAAE;EAE1D,KAAK,MAAMC,QAAQ,IAAIH,KAAK,EAAE;IAC5B,MAAMI,QAAQ,GAAGD,QAAQ,CAACE,WAAW,EAAE;IACvC;IACA;IACA,IACED,QAAQ,KAAK,IAAI,IACjBA,QAAQ,KAAKE,SAAS,IACtBpB,MAAA,CAAAG,OAAI,CAACkB,UAAU,CAACH,QAAQ,CAAC,EACzB;MACA,MAAMI,aAAa,GAAGrB,sBAAsB,CAACiB,QAAQ,CAAC;MAEtD,IAAII,aAAa,KAAKP,cAAc,EAAE;QACpC;;MAGF,IAAIO,aAAa,KAAK,IAAI,EAAE;QAC1B,OAAOF,SAAS;;MAGlB,OAAOrB,OAAO,CAACuB,aAAa,CAAC,CAACC,IAAI;;;EAItC,OAAOH,SAAS;AAClB;AApCAI,OAAA,CAAAjB,uBAAA,GAAAA,uBAAA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}