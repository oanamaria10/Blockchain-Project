{"ast":null,"code":"import * as UCAN from \"./ucan.js\";\nimport * as DID from \"./did.js\";\nimport { encode as encodeJSON } from \"@ipld/dag-json\";\nimport { decode as decodeUTF8 } from \"./utf8.js\";\n\n/**\n * @param {unknown} data\n */\nconst toJSON = data => JSON.parse(decodeUTF8(encodeJSON(data)));\n\n/**\n * @template {UCAN.Capabilities} C\n */\nexport class View {\n  /**\n   * @param {UCAN.UCAN<C>} model\n   */\n  constructor(model) {\n    /** @readonly */\n    this.model = model;\n  }\n  get version() {\n    return this.model.v;\n  }\n  get issuer() {\n    return DID.from(this.model.iss);\n  }\n  get audience() {\n    return DID.from(this.model.aud);\n  }\n\n  /**\n   * @returns {C}\n   */\n  get capabilities() {\n    return this.model.att;\n  }\n\n  /**\n   * @returns {number}\n   */\n  get expiration() {\n    const {\n      exp\n    } = this.model;\n    return exp === null ? Infinity : exp;\n  }\n\n  /**\n   * @returns {undefined|number}\n   */\n  get notBefore() {\n    return this.model.nbf;\n  }\n\n  /**\n   * @returns {undefined|string}\n   */\n\n  get nonce() {\n    return this.model.nnc;\n  }\n\n  /**\n   * @returns {UCAN.Fact[]}\n   */\n  get facts() {\n    return this.model.fct;\n  }\n\n  /**\n   * @returns {UCAN.Link[]}\n   */\n\n  get proofs() {\n    return this.model.prf;\n  }\n  get signature() {\n    return this.model.s;\n  }\n\n  // compatibility with UCAN.UCAN\n  get jwt() {\n    return this.model.jwt;\n  }\n  get s() {\n    return this.model.s;\n  }\n  get v() {\n    return this.model.v;\n  }\n  get iss() {\n    return this.model.iss;\n  }\n  get aud() {\n    return this.model.aud;\n  }\n  get att() {\n    return this.model.att;\n  }\n  get exp() {\n    return this.model.exp;\n  }\n  get nbf() {\n    return this.model.nbf;\n  }\n  get nnc() {\n    return this.model.nnc;\n  }\n  get fct() {\n    return this.model.fct;\n  }\n  get prf() {\n    return this.model.prf;\n  }\n\n  /**\n   * @returns {UCAN.ToJSON<UCAN.UCAN<C>, UCAN.UCANJSON<this>>}\n   */\n  toJSON() {\n    const {\n      v,\n      iss,\n      aud,\n      s,\n      att,\n      prf,\n      exp,\n      fct,\n      nnc,\n      nbf\n    } = this.model;\n    return {\n      iss,\n      aud,\n      v,\n      s,\n      exp,\n      ...toJSON({\n        att,\n        prf,\n        ...(fct.length > 0 && {\n          fct\n        })\n      }),\n      ...(nnc != null && {\n        nnc\n      }),\n      ...(nbf && {\n        nbf\n      })\n    };\n  }\n}","map":{"version":3,"names":["UCAN","DID","encode","encodeJSON","decode","decodeUTF8","toJSON","data","JSON","parse","View","constructor","model","version","v","issuer","from","iss","audience","aud","capabilities","att","expiration","exp","Infinity","notBefore","nbf","nonce","nnc","facts","fct","proofs","prf","signature","s","jwt","length"],"sources":["C:/FACULTATE/Proiect/node_modules/@ipld/dag-ucan/src/view.js"],"sourcesContent":["import * as UCAN from \"./ucan.js\"\nimport * as DID from \"./did.js\"\nimport { encode as encodeJSON } from \"@ipld/dag-json\"\nimport { decode as decodeUTF8 } from \"./utf8.js\"\n\n/**\n * @param {unknown} data\n */\nconst toJSON = data => JSON.parse(decodeUTF8(encodeJSON(data)))\n\n/**\n * @template {UCAN.Capabilities} C\n */\nexport class View {\n  /**\n   * @param {UCAN.UCAN<C>} model\n   */\n  constructor(model) {\n    /** @readonly */\n    this.model = model\n  }\n\n  get version() {\n    return this.model.v\n  }\n\n  get issuer() {\n    return DID.from(this.model.iss)\n  }\n\n  get audience() {\n    return DID.from(this.model.aud)\n  }\n\n  /**\n   * @returns {C}\n   */\n  get capabilities() {\n    return this.model.att\n  }\n\n  /**\n   * @returns {number}\n   */\n  get expiration() {\n    const { exp } = this.model\n    return exp === null ? Infinity : exp\n  }\n\n  /**\n   * @returns {undefined|number}\n   */\n  get notBefore() {\n    return this.model.nbf\n  }\n\n  /**\n   * @returns {undefined|string}\n   */\n\n  get nonce() {\n    return this.model.nnc\n  }\n\n  /**\n   * @returns {UCAN.Fact[]}\n   */\n  get facts() {\n    return this.model.fct\n  }\n\n  /**\n   * @returns {UCAN.Link[]}\n   */\n\n  get proofs() {\n    return this.model.prf\n  }\n\n  get signature() {\n    return this.model.s\n  }\n\n  // compatibility with UCAN.UCAN\n  get jwt() {\n    return this.model.jwt\n  }\n  get s() {\n    return this.model.s\n  }\n  get v() {\n    return this.model.v\n  }\n  get iss() {\n    return this.model.iss\n  }\n  get aud() {\n    return this.model.aud\n  }\n  get att() {\n    return this.model.att\n  }\n  get exp() {\n    return this.model.exp\n  }\n  get nbf() {\n    return this.model.nbf\n  }\n  get nnc() {\n    return this.model.nnc\n  }\n  get fct() {\n    return this.model.fct\n  }\n  get prf() {\n    return this.model.prf\n  }\n\n  /**\n   * @returns {UCAN.ToJSON<UCAN.UCAN<C>, UCAN.UCANJSON<this>>}\n   */\n  toJSON() {\n    const { v, iss, aud, s, att, prf, exp, fct, nnc, nbf } = this.model\n\n    return {\n      iss,\n      aud,\n      v,\n      s,\n      exp,\n      ...toJSON({\n        att,\n        prf,\n        ...(fct.length > 0 && { fct }),\n      }),\n      ...(nnc != null && { nnc }),\n      ...(nbf && { nbf }),\n    }\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}